set ssh (echo $SSH_CLIENT)

for FUNC_FILE in (ls $INSTPATH/Utils/Functions/Fish/Universal | grep .fish)
	source $INSTPATH/Utils/Functions/Fish/Universal/$FUNC_FILE
end

switch ( uname -s )
	case Darwin

		for FUNC_FILE in (ls $INSTPATH/Utils/Functions/Fish/macOS | grep .fish)
			source $INSTPATH/Utils/Functions/Fish/macOS/$FUNC_FILE
		end

		for SRC_FILE in (ls $INSTPATH/Constants/Fish/macOS | grep .fish )
			source $INSTPATH/Constants/Fish/macOS/$SRC_FILE
		end
		
		#sh $INSTPATH/Utils/kill_listeners.sh
		#sh $INSTPATH/Utils/run_listeners.sh

	case Linux
		
	case '*'
		echo Unknown OS
end

set HOST (hostname | awk -F. '{ print $1 }')

if [ $ssh = "" ]
	set PCOLOR $localColor
	set FCOLOR white
else
	set FCOLOR black
	set PCOLOR $remoteColor
	set PSTMT "$USER@$HOST: "
end

function fish_prompt
	set_color $FCOLOR -b $PCOLOR
	printf " %s" $PSTMT
	python $INSTPATH/Utils/dynamic_path.py
	printf " "
	set_color $PCOLOR -b normal
	printf "î‚° "
	set_color normal
end
set fish_greeting

if [ $ssh = "" ]
	if [  $TERM != "screen-256color" ]
		if [ (tmux ls | grep -c $USER) = "1" ]
			tmux a -t $USER
		else
			tmux new -s $USER
		end
	end
end
